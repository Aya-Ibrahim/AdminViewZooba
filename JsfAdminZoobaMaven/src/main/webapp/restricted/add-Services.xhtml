<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
      xmlns:p="http://primefaces.org/ui" 
      xmlns:f="http://xmlns.jcp.org/jsf/core"
      xmlns:pe="http://primefaces.org/ui/extensions">
    <ui:composition template="../template/AdminTemplate.xhtml">
        <!-- END X-NAVIGATION VERTICAL -->                     
        <ui:define name="myBody">
            <div class="page-content-wrap">
                <div class="row">
                    <div class="col-md-12">
                        <h:form class="form-horizontal" id="mainForm" prependId="false">
                            <div class="panel panel-default">
                                <div class="panel-heading">
                                    <h6>Service</h6>
                                </div>
                                <div class="panel-body">
                                    <div class="form-group">
                                        <label class="col-md-3 col-xs-12 control-label">Service Name</label>
                                        <div class="col-md-6 col-xs-12">                                            
                                            <div class="input-group">
                                                <span class="input-group-addon"><span class="fa fa-cogs"></span></span>
                                                <p:inputText id="name" type="text" value="#{addServicesBean.name}"  required="true" requiredMessage="Name must be inserted">
                                                    <f:ajax event="blur" render="nameMessage"/>
                                                </p:inputText>
                                            </div>   
                                            <p:message id="nameMessage" for="name"/>
                                        </div>
                                    </div>
                                    <div class="form-group">
                                        <label class="col-md-3 col-xs-12 control-label">Type Name:</label>
                                        <div class="col-md-6 col-xs-12">                                            
                                            <div class="input-group">
                                                <span class="input-group-addon"><span class="fa fa-suitcase"></span></span>
                                                <h:inputText id="type" value="#{addServicesBean.selectedType}" required="true" requiredMessage="Type must be inserted">
                                                    <f:ajax event="blur" render="typeMessage"/>
                                                </h:inputText>
                                            </div>   
                                            <p:message id="typeMessage" for="type"/>
                                        </div>
                                    </div>
                                    <div class="form-group">
                                        <label class="col-md-3 col-xs-12 control-label">Select Measuring Unit :</label>
                                        <div class="col-md-6 col-xs-12">                                            
                                            <div class="input-group">

                                                <h:form prependId="false">
                                                    <p:selectOneMenu id="years" value="#{addServicesBean.selectedUnit}">
                                                        <f:selectItem itemLabel="Select Unit" itemValue="" noSelectionOption="true" />
                                                        <f:selectItems value="#{addServicesBean.units}"/>
                                                    </p:selectOneMenu>
                                                    <br/>  <p:commandButton value="Add to Type List" update="display" action="#{addServicesBean.addToTypeList}"/>
                                                    <p:outputPanel id="display" style="width:250px;padding-left:5px;margin-top:10px">
                                                        <p:dataList value="#{addServicesBean.typeAndUnits}" var="typeAndUnit" emptyMessage="Nothing to insert">
                                                            <p:column>
                                                                #{typeAndUnit.typeName} : #{typeAndUnit.unitName}
                                                            </p:column>
                                                            <p:column>
                                                                <h:commandButton value="x"  action="#{addServicesBean.deleteFromTypeList(typeAndUnit.index)}"/>

                                                            </p:column>
                                                        </p:dataList>
                                                    </p:outputPanel>

                                                </h:form>
                                            </div>   
                                        </div>
                                    </div>
                                    <div class="form-group">
                                        <div class="col-md-6 col-xs-12">                                            
                                            <div class="input-group">
                                                <span class="input-group-addon"></span>

                                            </div>   
                                        </div>
                                    </div>
                                </div>
                                <div class="" style="align-content: center">
                                    <p:commandButton value="Save Service" class="btn btn-primary " action="#{addServicesBean.insertService()}" />
                                </div>
                            </div>
                        </h:form>
                    </div>
                </div>
            </div>
        </ui:define>
        
    </ui:composition>

</html>