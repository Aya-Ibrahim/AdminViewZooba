<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
      xmlns:p="http://primefaces.org/ui" 
      xmlns:f="http://xmlns.jcp.org/jsf/core"
      xmlns:pe="http://primefaces.org/ui/extensions">
    <ui:composition template="../template/AdminTemplate.xhtml">
        <!-- END X-NAVIGATION VERTICAL -->                     
        <ui:define name="myBody">
            <div class="page-content-wrap">
                <div class="row">
                    <div class="col-md-12">
                        <h:form class="form-horizontal" id="mainForm" prependId="false">

                            <div class="panel panel-default">
                                <div class="panel-heading">
                                    <h6>Address</h6>
                                </div>
                                <p:panelGrid class="panel-body" columns="2">
                                    <p:column>
                                        <div class="form-group">
                                            <label class="col-md-3 col-xs-12 control-label">city</label>
                                            <div class="col-md-6 col-xs-12">                                            
                                                <div class="input-group">
                                                    <span class="input-group-addon"><span class="fa fa-pencil"></span></span>
                                                    <p:inputText type="text" value="#{editProviderDetailsBean.city}" />
                                                </div>                                            

                                            </div>
                                        </div>
                                        <div class="form-group">
                                            <label class="col-md-3 col-xs-12 control-label">Country</label>
                                            <div class="col-md-6 col-xs-12">                                            
                                                <div class="input-group">
                                                    <span class="input-group-addon"><span class="fa fa-pencil"></span></span>
                                                    <p:inputText type="text" value="#{editProviderDetailsBean.country}" />
                                                </div>                                            

                                            </div>
                                        </div>
                                        <div class="form-group">
                                            <label class="col-md-3 col-xs-12 control-label">Street</label>
                                            <div class="col-md-6 col-xs-12">                                            
                                                <div class="input-group">
                                                    <span class="input-group-addon"><span class="fa fa-pencil"></span></span>
                                                    <p:inputText type="text" value="#{editProviderDetailsBean.street}"/>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="form-group">
                                            <label class="col-md-3 col-xs-12 control-label">Landmark</label>
                                            <div class="col-md-6 col-xs-12">                                            
                                                <div class="input-group">
                                                    <span class="input-group-addon"><span class="fa fa-pencil"></span></span>
                                                    <p:inputText type="text" value="#{editProviderDetailsBean.landmark}"/>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="form-group">
                                            <label class="col-md-3 col-xs-12 control-label">Other</label>
                                            <div class="col-md-6 col-xs-12">                                            
                                                <div class="input-group">
                                                    <span class="input-group-addon"><span class="fa fa-pencil"></span></span>
                                                    <p:inputText type="text" value="#{editProviderDetailsBean.others}"/>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="form-group">
                                            <label class="col-md-3 col-xs-12 control-label">Postal Code</label>
                                            <div class="col-md-6 col-xs-12">                                            
                                                <div class="input-group">
                                                    <span class="input-group-addon"><span class="fa fa-pencil"></span></span>
                                                    <p:inputText type="text" value="#{editProviderDetailsBean.postalCode}"/>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="form-group">
                                            <label class="col-md-3 col-xs-12 control-label">Longitude</label>
                                            <div class="col-md-6 col-xs-12">                                            
                                                <div class="input-group">
                                                    <span class="input-group-addon"><span class="fa fa-pencil"></span></span>
                                                    <p:inputText id="longitudePF" type="text" value="#{editProviderDetailsBean.longitude}"/>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="form-group">
                                            <label class="col-md-3 col-xs-12 control-label">Latitude</label>
                                            <div class="col-md-6 col-xs-12">                                            
                                                <div class="input-group">
                                                    <span class="input-group-addon"><span class="fa fa-pencil"></span></span>
                                                    <p:inputText id="latitudePF" type="text" value="#{editProviderDetailsBean.latitude}"/>
                                                </div>
                                            </div>
                                        </div>
                                    </p:column>
                                    <p:column>
                                        <div id="mapholder"></div>
                                        <button onclick="getLocation()" type="button">Pick From Map</button>
                                        <br/>
                                        Latitude:<input type="text" id="lat" />
                                        <br/>
                                        Longitude: <input type="text" id="lon"/>
                                        <button onclick="" type="button">Get this Position</button>
                                        <p:dialog id="dlg" showEffect="fade" closable="false">
                                            <h:panelGrid columns="2">
                                                <h:outputLabel for="title" value="Title:" />
                                                <p:inputText id="title" value="#{mapBean.title}" />
                                                <f:facet name="footer">
                                                    <p:commandButton value="Add" oncomplete="markerAddComplete()" />
                                                    <p:commandButton value="Cancel" onclick="return cancel()" />
                                                </f:facet>
                                            </h:panelGrid>
                                            <h:inputHidden id="lat" value="#{mapBean.lat}" />
                                            <h:inputHidden id="lon" value="#{mapBean.lng}" />
                                        </p:dialog>
                                        <script>
                                            var newMarker = null;
                                            var x = document.getElementById("demo");
                                            function getThisLocation() {
                                                lat = document.getElementById("lat").value;
                                                lon = document.getElementById("lon").value;
                                                latlon = new google.maps.LatLng(lat, lon);
                                                mapholder = document.getElementById('mapholder');
                                                mapholder.style.height = '250px';
                                                mapholder.style.width = '500px';

                                                var myOptions = {
                                                    center: latlon, zoom: 14,
                                                    mapTypeId: google.maps.MapTypeId.ROADMAP,
                                                    mapTypeControl: false,
                                                    navigationControlOptions: {style: google.maps.NavigationControlStyle.SMALL}
                                                };
                                                var map = new google.maps.Map(document.getElementById("mapholder"), myOptions);
                                                map.addListener('click', function (e) {
                                                    placeMarkerAndPanTo(e.latLng, map);
                                                });
                                                var marker = new google.maps.Marker({position: latlon, map: map, title: "You are here!"});
                                            }
                                            function getLocation()
                                            {
                                                if (navigator.geolocation)
                                                {
                                                    navigator.geolocation.getCurrentPosition(showPosition, showError);
                                                } else {
                                                    x.innerHTML = "Geolocation is not supported by this browser.";
                                                }
                                            }

                                            function showPosition(position)
                                            {
                                                lat = position.coords.latitude;
                                                lon = position.coords.longitude;
                                                document.getElementById("lat").value = lat;
                                                document.getElementById("lon").value = lon;
                                                latlon = new google.maps.LatLng(lat, lon);
                                                mapholder = document.getElementById('mapholder');
                                                mapholder.style.height = '250px';
                                                mapholder.style.width = '500px';

                                                var myOptions = {
                                                    center: latlon, zoom: 14,
                                                    mapTypeId: google.maps.MapTypeId.ROADMAP,
                                                    mapTypeControl: false,
                                                    navigationControlOptions: {style: google.maps.NavigationControlStyle.SMALL}
                                                };
                                                var map = new google.maps.Map(document.getElementById("mapholder"), myOptions);
                                                var marker = new google.maps.Marker({position: latlon, map: map, title: "You are here!"});
                                                map.addListener('click', function (e) {
                                                    placeMarkerAndPanTo(e.latLng, map);
                                                });
                                            }
                                            function setPosition(position)
                                            {
                                                lat = position.coords.latitude;
                                                lon = position.coords.longitude;
                                                document.getElementById("lat").value = lat;
                                                document.getElementById("lon").value = lon;

                                            }

                                            function showError(error)
                                            {
                                                switch (error.code)
                                                {
                                                    case error.PERMISSION_DENIED:
                                                        x.innerHTML = "User denied the request for Geolocation."
                                                        break;
                                                    case error.POSITION_UNAVAILABLE:
                                                        x.innerHTML = "Location information is unavailable."
                                                        break;
                                                    case error.TIMEOUT:
                                                        x.innerHTML = "The request to get user location timed out."
                                                        break;
                                                    case error.UNKNOWN_ERROR:
                                                        x.innerHTML = "An unknown error occurred."
                                                        break;
                                                }
                                            }
                                            function placeMarkerAndPanTo(latLng, map) {
                                                $("#dlg").show();
                                                newMarker = new google.maps.Marker({
                                                    position: latLng,
                                                    map: map
                                                });
                                                if (navigator.geolocation)
                                                {
                                                    navigator.geolocation.getCurrentPosition(setPosition, showError);
                                                } else {
                                                    x.innerHTML = "Geolocation is not supported by this browser.";
                                                }
                                                map.panTo(latLng);
                                            }
                                            function markerAddComplete() {
                                                var title = document.getElementById('title');
                                                newMarker.setTitle(title.value);
                                                title.value = "";
                                                newMarker = null;
                                                $("#dlg").hide();
                                                hLat = document.getElementById("lat").value;
                                                hLon = document.getElementById("lon").value;
                                                jQuery('#longitudePF').val(hLon);
                                                jQuery('#latitudePF').val(hLat);
                                            }
                                            function cancel() {
                                                $("#dlg").hide();
                                                newMarker.setMap(null);
                                                newMarker = null;

                                                return false;
                                            }
                                        </script>
                                    </p:column>
                                </p:panelGrid>
                                <div class="panel-footer">
                                    <p:commandButton label="Save Address" class="btn btn-primary" action="#{editProviderDetailsBean.insertAddress()}" >Save Address</p:commandButton>
                                </div>
                            </div>
                            <div class="panel panel-default">
                                <div class="panel-heading">
                                    <h6>Phone</h6>
                                </div>
                                <div class="panel-body">
                                    <div class="form-group">
                                        <label class="col-md-3 col-xs-12 control-label">Phone</label>
                                        <div class="col-md-6 col-xs-12">                                            
                                            <div class="input-group">
                                                <span class="input-group-addon"><span class="fa fa-pencil"></span></span>
                                                <p:inputText type="text" value="#{editProviderDetailsBean.phone}" />
                                            </div>   
                                        </div>
                                    </div>
                                </div>
                                <div class="panel-footer">
                                    <p:commandButton label="Save Phone" class="btn btn-primary " action="#{editProviderDetailsBean.insertPhone()}" >Save Phone</p:commandButton>
                                </div>
                            </div>
                            <div class="panel panel-default">
                                <div class="panel-heading">
                                    <h6>Supported Makes</h6>
                                </div>
                                <div class="panel-body">
                                    <div class="form-group">
                                        <label class="col-md-3 col-xs-12 control-label">Supported Make</label>
                                        <div class="col-md-6 col-xs-12">                                            
                                            <div class="input-group">
                                                <span class="input-group-addon"><span class="fa fa-pencil"></span></span>
                                                <h:panelGrid columns="3" cellpadding="5">
                                                    <h:outputLabel for="menu" value="Supported Makes:" />
                                                    <p:selectCheckboxMenu id="menu" value="#{editProviderDetailsBean.selectedMakes}" label="Makes"
                                                                          filter="true" filterMatchMode="startsWith" panelStyle="width:250px">
                                                        <f:selectItems value="#{editProviderDetailsBean.getMakes()}" />
                                                    </p:selectCheckboxMenu>
                                                </h:panelGrid>
                                            </div>   
                                        </div>
                                    </div>
                                </div>
                                <div class="panel-footer">
                                    <p:commandButton id="phonebtn" label="Save Phone" class="btn btn-primary " action="#{editProviderDetailsBean.insertMakes()}" >Save Makes</p:commandButton>
                                </div>
                            </div>
                            <div class="panel panel-default">
                                <div class="panel-heading">
                                    <h6>Schedule</h6>
                                </div>
                                <div class="panel-body">
                                    <div class="form-group">
                                        <label class="col-md-3 col-xs-12 control-label">Schedule</label>
                                        <div class="col-md-6 col-xs-12">                                            
                                            <div class="input-group">
                                                <span class="input-group-addon"><span class="fa fa-pencil"></span></span>
                                                <h:panelGrid columns="6" cellspacing="5px">
                                                    <h:outputLabel for="dmenu" value="Days :" />
                                                    <p:selectCheckboxMenu id="dmenu" value="#{editProviderDetailsBean.selectedDays}" label="Days"
                                                                          filter="true" filterMatchMode="startsWith" panelStyle="width:250px">
                                                        <f:selectItems value="#{editProviderDetailsBean.getDays()}" />
                                                    </p:selectCheckboxMenu>
                                                    <h:outputText value="From  " style="font-size: 16px"/>
                                                    <pe:timePicker value="#{editProviderDetailsBean.from}" widgetVar="spinnerTimeWidget"  
                                                                   label="Spinner time picker"/>
                                                    <h:outputText value="to  " style="font-size: 16px"/>
                                                    <pe:timePicker value="#{editProviderDetailsBean.to}" widgetVar="spinnerTimeWidget"  
                                                                   label="Spinner time picker"/>
                                                </h:panelGrid>
                                            </div>   
                                        </div>
                                    </div>
                                </div>
                                <div class="panel-footer">
                                    <p:commandButton id="schedulebtn" label="Save Schedule" class="btn btn-primary " action="#{editProviderDetailsBean.insertSchedule()}" >Save Schedule</p:commandButton>
                                </div>
                            </div>
                            <div class="panel panel-default">
                                <div class="panel-heading">
                                    <h6>Supported Services</h6>
                                </div>
                                <div class="panel-body">
                                    <div class="form-group">
                                        <label class="col-md-3 col-xs-12 control-label">Supported Services</label>
                                        <div class="col-md-6 col-xs-12">                                            
                                            <div class="input-group">
                                                <span class="input-group-addon"><span class="fa fa-pencil"></span></span>
                                                <h:panelGrid columns="6" cellpadding="5">
                                                    <h:outputLabel for="servicesMenu" value="Supported Services:" />
                                                    <p:selectCheckboxMenu id="servicesMenu" value="#{editProviderDetailsBean.selectedServices}" label="Services"
                                                                          filter="true" filterMatchMode="startsWith" panelStyle="width:250px">
                                                        <f:selectItems value="#{editProviderDetailsBean.getServices()}" />
                                                    </p:selectCheckboxMenu>
                                                    <h:outputText value="From  " style="font-size: 16px"/>
                                                    <pe:timePicker value="#{editProviderDetailsBean.serviceFrom}" widgetVar="spinnerTimeWidget"  
                                                                   label="Spinner time picker"/>
                                                    <h:outputText value="to  " style="font-size: 16px"/>
                                                    <pe:timePicker value="#{editProviderDetailsBean.serviceTo}" widgetVar="spinnerTimeWidget"  
                                                                   label="Spinner time picker"/>
                                                </h:panelGrid>
                                            </div>   
                                        </div>
                                    </div>
                                </div>
                                <div class="panel-footer">
                                    <p:commandButton id="servicebtn" label="Save service" class="btn btn-primary " action="#{editProviderDetailsBean.insertServices()}" >Save Services</p:commandButton>
                                </div>
                            </div>
                        </h:form>
                    </div>
                </div>
            </div>
        </ui:define>

    </ui:composition>

</html>